!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="7bbc8aca-ee3d-4a02-8581-b0ed875cb4f3",e._sentryDebugIdIdentifier="sentry-dbid-7bbc8aca-ee3d-4a02-8581-b0ed875cb4f3")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4812,8426],{33532:(e,t,s)=>{"use strict";s.d(t,{A:()=>z});var a=s(80263),r=s(60045),l=s(53667),n=s.n(l),c=s(65880),i=s(59153),o=s.n(i),d=s(47504),u=s(73969),p=s(19898),x=s(79255),m=s(93269),f=s(57304),h=s(64652),g=s(77227),j=s(34969),y=s(49443),b=s(2057),v=s(62420),N=s(39321),w=s(56163),q=s(81924),k=s(51859),C=s(84746),_=s(71126),R=s(13114),I=s(97872),T=s(78823),E=s(53434),L=s.n(E),A=s(27344),P=s.n(A),U=s(37055),S=s(88712),W=s(31883);function D(){let{ref:e}=(0,p.g)(),t=(0,w.zv)(),s=(0,R.l)();if(!(null==t?void 0:t.recentItems)||!e)return null;let r=(s?t.recentItems.filter(e=>w.qm[s].includes(e.type)):[...t.recentItems]).sort((e,t)=>t.timestamp-e.timestamp);return(0,a.jsxs)("div",{className:"space-y-4","data-sentry-component":"RecentItems","data-sentry-source-file":"RecentItems.tsx",children:[(0,a.jsx)("h2",{className:"text-sm text-foreground",children:"Recent items"}),(0,a.jsx)("div",{className:"flex flex-col gap-0",children:0===r.length?(0,a.jsxs)(U.P.div,{layout:!0,initial:!1,className:"flex flex-col items-center justify-center p-8 text-center border rounded-md border-muted gap-3",children:[(0,a.jsx)(W.L,{type:"r"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-foreground-light",children:"No recent items yet"}),(0,a.jsx)("p",{className:"text-xs text-foreground-lighter",children:"Items will appear here as you browse through your project"})]})]}):(0,a.jsx)(S.N,{children:(0,a.jsx)("div",{className:"grid grid-cols-1 gap-12 gap-y-0",children:r.map((t,s)=>{var r,l,n,c,i,d,u;return(0,a.jsx)(U.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{delay:.012*s,duration:.15},children:(0,a.jsxs)(o(),{href:"/project/".concat(e,"/").concat("sql"===t.type?"sql/".concat(null==(r=t.metadata)?void 0:r.sqlId):"r"===t.type||"v"===t.type||"m"===t.type||"f"===t.type||"p"===t.type?"editor/".concat(null==(l=t.metadata)?void 0:l.tableId,"?schema=").concat(null==(n=t.metadata)?void 0:n.schema):"explorer/".concat(t.type,"/").concat(null==(c=t.metadata)?void 0:c.schema,"/").concat(null==(i=t.metadata)?void 0:i.name)),className:"flex items-center gap-4 rounded-lg bg-surface-100 py-2 transition-colors hover:bg-surface-200",children:[(0,a.jsx)("div",{className:"flex h-6 w-6 items-center justify-center rounded bg-surface-100 border",children:(0,a.jsx)(W.L,{type:t.type})}),(0,a.jsxs)("div",{className:"flex flex-1 gap-5 items-center",children:[(0,a.jsxs)("span",{className:"text-sm text-foreground",children:[(0,a.jsx)("span",{className:"text-foreground-lighter",children:null==(d=t.metadata)?void 0:d.schema}),(null==(u=t.metadata)?void 0:u.schema)&&(0,a.jsx)("span",{className:"text-foreground-light",children:"."}),(0,a.jsx)("span",{className:"text-foreground",children:t.label||"Untitled"})]}),(0,a.jsx)("div",{className:"bg-border-muted flex grow h-px"}),(0,a.jsx)("span",{className:"text-xs text-foreground-lighter",children:L()(t.timestamp).fromNow()})]})]})},t.id)})})})})]})}function z(){let e=(0,d.useRouter)(),{ref:t}=(0,p.g)(),s=(0,R.l)(),{profile:l}=(0,b.xc)(),i=(0,j.a)(),{project:E}=(0,I.Om)(),L=(0,N.ap)(),A=(0,v.aP)(),P=(0,w.zv)(),[U]=n()(m.R,{type:"template"}),[S]=n()(m.R,{type:"quickstart"}),{mutate:W}=(0,h.h)(),z=(0,g.SE)(r.aG.CREATE,"user_content",{resource:{type:"sql",owner_id:null==l?void 0:l.id},subject:{id:null==l?void 0:l.id}}),Z=[{icon:(0,a.jsx)(c.A,{className:"h-4 w-4 text-foreground",strokeWidth:1.5}),title:"Create a table",description:"Design and create a new database table",bgColor:"bg-blue-500",isBeta:!1,onClick:L.onAddTable}],B=[{icon:(0,a.jsx)(q.ty,{className:(0,k.cn)("fill-foreground","w-4 h-4"),strokeWidth:1.5}),title:"New SQL Snippet",description:"Execute SQL queries",bgColor:"bg-green-500",isBeta:!1,onClick:()=>e.push("/project/".concat(t,"/sql/new"))}],M=async(s,a)=>{if(!t)return console.error("Project ref is required");if(!E)return console.error("Project is required");if(!l)return console.error("Profile is required");if(!z)return(0,u.oR)("Your queries will not be saved as you do not have sufficient permissions");try{let r=(0,f.fW)({id:(0,y.gZ)(),name:a,sql:s,owner_id:null==l?void 0:l.id,project_id:null==E?void 0:E.id});A.addSnippet({projectRef:t,snippet:r}),A.addNeedsSaving(r.id);let n=(0,w.lW)("sql",{id:r.id});P.addTab({id:n,type:"sql",label:a,metadata:{sqlId:r.id}}),e.push("/project/".concat(t,"/sql/").concat(r.id))}catch(e){u.oR.error("Failed to create new query: ".concat(e.message))}};return(0,a.jsxs)("div",{className:"bg-surface-100 h-full overflow-y-auto py-12","data-sentry-component":"NewTab","data-sentry-source-file":"NewTab.tsx",children:[(0,a.jsxs)("div",{className:"mx-auto max-w-2xl flex flex-col gap-10 px-10",children:[(0,a.jsx)(x.k5,{"data-sentry-element":"TabsUpdateCallout","data-sentry-source-file":"NewTab.tsx"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:("sql"===s?B:Z).map((e,t)=>(0,a.jsx)(T.L,{...e},"action-card-".concat(t)))}),(0,a.jsx)(D,{"data-sentry-element":"RecentItems","data-sentry-source-file":"NewTab.tsx"})]}),"sql"===s&&(0,a.jsx)("div",{className:"flex flex-col gap-4 mx-auto py-10",children:(0,a.jsxs)(C.tU,{defaultValue:"templates",children:[(0,a.jsxs)(C.j7,{className:"mx-auto justify-center gap-5",children:[(0,a.jsx)(C.Xi,{value:"templates",children:"Templates"}),(0,a.jsx)(C.Xi,{value:"quickstarts",children:"Quickstarts"})]}),(0,a.jsxs)(C.av,{value:"templates",className:"max-w-5xl mx-auto py-5",children:[(0,a.jsx)("div",{className:"grid grid-cols-3 gap-4 px-8",children:U.slice(0,9).map((e,s)=>(0,a.jsx)(T.L,{onClick:()=>{var s;M(e.sql,e.title),W({action:"sql_editor_template_clicked",properties:{templateName:e.title},groups:{project:null!=t?t:"Unknown",organization:null!=(s=null==i?void 0:i.slug)?s:"Unknown"}})},bgColor:"bg-alternative border",...e,icon:(0,a.jsx)(q.ty,{className:(0,k.cn)("fill-foreground","w-4 h-4"),strokeWidth:1.5})},"action-card-".concat(s)))}),(0,a.jsx)("div",{className:"flex justify-center mt-5",children:(0,a.jsx)(_.$,{asChild:!0,type:"default",children:(0,a.jsx)(o(),{href:"/project/".concat(t,"/sql/templates"),children:"View more templates"})})})]}),(0,a.jsxs)(C.av,{value:"quickstarts",className:"max-w-5xl mx-auto py-5",children:[(0,a.jsx)("div",{className:"grid grid-cols-3 gap-4 px-8",children:S.map((e,s)=>(0,a.jsx)(T.L,{onClick:()=>{var s;M(e.sql,e.title),W({action:"sql_editor_quickstart_clicked",properties:{quickstartName:e.title},groups:{project:null!=t?t:"Unknown",organization:null!=(s=null==i?void 0:i.slug)?s:"Unknown"}})},bgColor:"bg-alternative border",...e,icon:(0,a.jsx)(q.ty,{className:(0,k.cn)("fill-foreground","w-4 h-4"),strokeWidth:1.5})},"action-card-".concat(s)))}),(0,a.jsx)("div",{className:"flex justify-center mt-5",children:(0,a.jsx)(_.$,{asChild:!0,type:"default",children:(0,a.jsx)(o(),{href:"/project/".concat(t,"/sql/quickstarts"),children:"View more templates"})})})]})]})})]})}L().extend(P())},56282:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/sql",function(){return s(84647)}])},76948:(e,t,s)=>{"use strict";s.d(t,{Wu:()=>o,ZB:()=>i,Zp:()=>n,aR:()=>c,wL:()=>d});var a=s(80263),r=s(53239),l=s(51859);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-surface-100 text-card-foreground shadow-sm",s),...r})});n.displayName="Card";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 py-4 px-6 border-b",s),...r})});c.displayName="CardHeader";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,l.cn)("text-xs font-mono uppercase",s),...r})});i.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-foreground-muted",s),...r})}).displayName="CardDescription";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("py-4 px-6 border-b last:border-none",s),...r})});o.displayName="CardContent";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)(" flex items-center py-4 px-6",s),...r})});d.displayName="CardFooter"},78823:(e,t,s)=>{"use strict";s.d(t,{L:()=>n});var a=s(80263),r=s(76948),l=s(65863);let n=e=>(0,a.jsx)(r.Zp,{className:"grow bg-surface-100 p-3 transition-colors hover:bg-surface-200 border border-light hover:border-default cursor-pointer",onClick:e.onClick,"data-sentry-element":"Card","data-sentry-component":"ActionCard","data-sentry-source-file":"ActionCard.tsx",children:(0,a.jsxs)("div",{className:"relative flex items-start gap-3",children:[e.isBeta&&(0,a.jsx)(l.E,{className:"absolute -right-5 -top-5 bg-surface-300 bg-opacity-100 text-xs text-foreground",children:"Coming soon"}),(0,a.jsx)("div",{className:"rounded-full ".concat(e.bgColor," w-8 h-8 flex items-center justify-center flex-shrink-0"),children:e.icon}),(0,a.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,a.jsx)("h3",{className:"text-sm text-foreground mb-0",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-foreground-light",children:e.description})]})]})})},84647:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(80263),r=s(19898),l=s(90915),n=s(1053),c=s(97878),i=s(97201),o=s(81058),d=s(33532),u=s(47504),p=s(53239),x=s(22787),m=s(56163);let f=()=>{let e=(0,u.useRouter)(),{ref:t}=(0,r.g)(),s=(0,m.zv)(),n=(0,x.qM)(),c=(0,l.Uq)();return(0,p.useEffect)(()=>{if(c){let a=n.dashboardHistory.sql,r=s.openTabs.find(e=>{var t;return(null==(t=s.tabsMap[e])?void 0:t.type)==="sql"});if(void 0!==a)e.push("/project/".concat(t,"/sql/").concat(n.dashboardHistory.sql));else if(r){let a=s.tabsMap[r];a&&e.push("/project/".concat(t,"/sql/").concat(a.id.replace("sql-","")))}}else e.push("/project/".concat(t,"/sql/new"))},[c]),c?(0,a.jsx)(d.A,{"data-sentry-element":"NewTab","data-sentry-component":"TableEditorPage","data-sentry-source-file":"index.tsx"}):null};f.getLayout=e=>(0,a.jsx)(n.A,{children:(0,a.jsx)(c.$,{productMenu:(0,a.jsx)(o.Z,{}),product:"SQL Editor",children:(0,a.jsx)(i.A,{children:e})})});let h=f}},e=>{var t=t=>e(e.s=t);e.O(0,[89,2147,726,4669,9353,7176,3730,2056,9844,6110,6871,9025,5297,5661,4100,1685,2981,4181,2187,4560,4963,3895,1959,9116,9869,4938,460,5443,7872,5874,49,2174,971,6642,3083,2602,1779,6593,636,8792],()=>t(56282)),_N_E=e.O()}]);